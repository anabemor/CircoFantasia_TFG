<div class="max-w-xl mx-auto p-6 bg-white rounded shadow space-y-4">
  <h2 class="text-2xl font-bold text-center text-fantasia-azul-oscuro mb-2">Datos del Visitante</h2>

  <form #form="ngForm" (ngSubmit)="continuar()" class="space-y-4">

    <!-- Nombre -->
    <div>
      <label class="block font-semibold">Nombre *</label>
      <input
        type="text"
        name="nombre"
        [(ngModel)]="nombre"
        #nombreRef="ngModel"
        required
        minlength="3"
        class="w-full px-4 py-2 rounded-lg bg-white text-black placeholder-purple-400 border border-purple-700 focus:outline-none focus:ring-2 focus:ring-indigo-400"
      />
      <div *ngIf="nombreRef.invalid && nombreRef.touched" class="text-red-600 text-sm mt-1">
        <span *ngIf="nombreRef.errors?.['required']">Este campo es obligatorio.</span>
        <span *ngIf="nombreRef.errors?.['minlength']">Debe tener al menos 3 letras.</span>
      </div>
    </div>

    <!-- Apellidos -->
    <div>
      <label class="block font-semibold">Apellidos *</label>
      <input
        type="text"
        name="apellidos"
        [(ngModel)]="apellidos"
        #apellidosRef="ngModel"
        required
        minlength="3"
        class="w-full px-4 py-2 rounded-lg bg-white text-black placeholder-purple-400 border border-purple-700 focus:outline-none focus:ring-2 focus:ring-indigo-400"
      />
      <div *ngIf="apellidosRef.invalid && apellidosRef.touched" class="text-red-600 text-sm mt-1">
        <span *ngIf="apellidosRef.errors?.['required']">Este campo es obligatorio.</span>
        <span *ngIf="apellidosRef.errors?.['minlength']">Debe tener al menos 3 letras.</span>
      </div>
    </div>

    <!-- Fecha de nacimiento -->
    <div>
      <label class="block font-semibold">Fecha de nacimiento *</label>
      <input
        type="date"
        name="fechaNacimiento"
        [(ngModel)]="fechaNacimiento"
        #fechaNacimientoRef="ngModel"
        required
        max="{{ hoy }}"
        class="w-full px-4 py-2 rounded-lg bg-white text-black border border-purple-700 focus:outline-none focus:ring-2 focus:ring-indigo-400"
      />
      <div *ngIf="fechaNacimientoRef.invalid && fechaNacimientoRef.touched" class="text-red-600 text-sm mt-1">
        Este campo es obligatorio.
      </div>
    </div>

    <!-- Email -->
    <div>
      <label class="block font-semibold">Email *</label>
      <input
        type="email"
        name="email"
        [(ngModel)]="email"
        #emailRef="ngModel"
        required
        class="w-full px-4 py-2 rounded-lg bg-white text-black placeholder-purple-400 border border-purple-700 focus:outline-none focus:ring-2 focus:ring-indigo-400"
      />
      <div *ngIf="emailRef.invalid && emailRef.touched" class="text-red-600 text-sm mt-1">
        <span *ngIf="emailRef.errors?.['required']">Este campo es obligatorio.</span>
        <span *ngIf="emailRef.errors?.['email']">Formato de email no válido.</span>
      </div>
    </div>

    <!-- Confirmar Email -->
    <div>
      <label class="block font-semibold">Confirmar email *</label>
      <input
        type="email"
        name="confirmarEmail"
        [(ngModel)]="confirmarEmail"
        #confirmarEmailRef="ngModel"
        required
        class="w-full px-4 py-2 rounded-lg bg-white text-black placeholder-purple-400 border border-purple-700 focus:outline-none focus:ring-2 focus:ring-indigo-400"
      />
      <div *ngIf="confirmarEmailRef.invalid && confirmarEmailRef.touched" class="text-red-600 text-sm mt-1">
        Este campo es obligatorio.
      </div>
    </div>

    <!-- Teléfono -->
    <div>
      <label class="block font-semibold">Teléfono *</label>
      <input
        type="tel"
        name="telefono"
        [(ngModel)]="telefono"
        #telefonoRef="ngModel"
        pattern="[0-9]{9}"
        required
        class="w-full px-4 py-2 rounded-lg bg-white text-black placeholder-purple-400 border border-purple-700 focus:outline-none focus:ring-2 focus:ring-indigo-400"
      />
      <div *ngIf="telefonoRef.invalid && telefonoRef.touched" class="text-red-600 text-sm mt-1">
        <span *ngIf="telefonoRef.errors?.['required']">Este campo es obligatorio.</span>
        <span *ngIf="telefonoRef.errors?.['pattern']">Debe contener exactamente 9 números.</span>
      </div>
    </div>

    <!-- Condiciones -->
    <div class="flex items-start gap-2 text-sm">
      <input
        type="checkbox"
        name="aceptoCondiciones"
        [(ngModel)]="aceptoCondiciones"
        #condicionesRef="ngModel"
        required
        class="mt-1"
      />
      <label class="text-gray-700">
        He leído y acepto los términos y condiciones de compra y las normas de funcionamiento del parque *
      </label>
    </div>
    <div *ngIf="condicionesRef.invalid && condicionesRef.touched" class="text-red-600 text-sm mt-1">
      Debes aceptar las condiciones.
    </div>

    <!-- Botón enviar -->
    <button
      type="submit"
      [disabled]="form.invalid"
      class="mt-7 bg-[#092191] text-white py-3 px-6 rounded-3xl hover:bg-[#7FA1CD] transition font-semibold ml-auto block"
    >
      Confirmar y continuar
    </button>

  </form>

  <!-- Botón volver -->
  <div class="text-right mt-4">
    <button
      type="button"
      (click)="volver()"
      class="px-4 py-2 bg-fantasia-rosa text-white rounded-full hover:bg-[#092191] transition"
    >
      ← Volver
    </button>
  </div>
</div>
